define(["petitspois","vue","upload","loadin","pwatch"],function(e,a,t,i,o){var s=location.hash;e("#profile-tab").children().each(function(a,t){e(this).on("click",function(){e(".profile-sh").each(function(){e(this).hasClass("show")?e(this).removeClass("show"):e(this).hasClass("ng-enter")&&e(this).removeClass("ng-enter")}),e("#profile-tab").children().each(function(){e(this).removeClass("active")}),e(this).addClass("active"),e(".profile-sh").eq(a).addClass("show ng-enter"),2==a?o.watchme.loadwatchyou():3==a&&o.mewatch.loadyouwatch()})}),"#settings"==s&&e("#profile-tab").children().eq(1).trigger("click"),t.preview("cover","",function(a){var t=a.replace(/^data:image\/\w+;base64,/,"")||"";i.show("load"),t&&e.ajax({url:"/cover",type:"POST",data:{coverData:t}}).then(function(e){e=JSON.parse(e),e.status&&(i.show("alert",e.msg,"success"),setTimeout(function(){location.reload()},1e3))},function(){})});var n="";t.preview("avatar","preview-avatar",function(e){n=e}),a.config.delimiters=["(%","%)"],new a({el:"#profile-form",data:{profile:{nickname:"",sex:profileSex,company:"",location:"",avatar:"",description:"",github:"",weibo:""}},methods:{submit:function(a){a.preventDefault(),i.show("load");var t=this.$data.profile;n&&(n=n.replace(/^data:image\/\w+;base64,/,"")||""),t.avatar=n,e.ajax({type:"POST",url:"/profile",data:t}).then(function(e){e=JSON.parse(e),e.status&&(i.show("alert",e.msg,"success"),setTimeout(function(){location.reload()},1e3))},function(){})}}})});