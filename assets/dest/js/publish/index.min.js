define(["petitspois","vue","vueValidator","loadin","editor"],function(t,e,o,i){var s=new Editor;s.render(t("#editor")[0]),e.use(o);new e({data:{post:{title:"",tags:"",category:"",content:"",theme:theme,istop:istop,isgood:isgood,iscomment:iscomment,edit:""}},methods:{submit:function(e){e.preventDefault(),s.codemirror.getValue()?this.post.content=s.codemirror.getValue():i.show("alert","文章内容不能为空","danger");var o=this.post.edit?"/postedit":"/publish";i.show("load"),t.ajax({type:"POST",url:o,data:this.$data.post}).then(function(t){t=JSON.parse(t),t.status?location.replace("/post/"+t.data.id):i.show("alert",t.msg,"danger")},function(){})}}}).$mount("#publish-form")});