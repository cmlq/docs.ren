define(["petitspois","gf"],function(a,t){var s=!!USER,e=!!parseInt(a("#watch")[0].dataset.iswatch);a("#watch").on("click",function(){var i=this;if(a(i).addClass("disabled"),s){var n=a(this)[0].dataset.oppositeuid;a.ajax({url:"/watch",type:"POST",data:{type:e,oid:n}}).then(function(s){s=JSON.parse(s),s.status?(a(i).text(s.msg),a(i).hasClass("disabled")&&a(i).removeClass("disabled"),e=!e):t("error",s.msg)},function(){})}else location.href="/signin"})});