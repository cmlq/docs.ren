define(["petitspois","vue","vueValidator","loadin","gf"],function(e,t,n,i,o){t.use(n);new t({data:{user:{bind:"",email:"",pwd:""}},methods:{submit:function(t){var n=this.$data.user;t.preventDefault();var a=document.getElementById("bind-email")&&document.getElementById("bind-email").title||"";a&&~a.indexOf("@")&&(n.bind=a),i.show("load"),e.ajax({type:"POST",url:"/signin",data:n}).then(function(e){e=JSON.parse(e),i.hide(),e.status?(o("success","登陆成功"),setTimeout(function(){location.replace("/")},1200)):o("error",e.msg)},function(){o("error","登陆失败，请重试")})},oauth:function(){e.ajax({type:"GET",url:"/oauth/github/login"}).then(function(e){self.location.href=e},function(){})}}}).$mount("#login")});