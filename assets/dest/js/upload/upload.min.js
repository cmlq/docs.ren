define(["petitspois","loadin"],function(e,r){return{preview:function(n,t,a){var o=e("#"+n),i=t?e("#"+t):"";o.on("change",function(n){var t=n.target.files[0],o=new FileReader;return t.type.match("image.*")?t.size>=2097152?void r.show("alert","图片大小过大，应小于2M","danger"):(o.onload=function(){var r=document.createElement("img");r.id="preview-avatar-img",!!i&&(i[0].innerHTML=""),!!i&&i[0].appendChild(r),e("#wrap-progress").removeClass("no-show"),r.src=o.result,a(o.result)},!!i&&(o.onprogress=function(r){if(r.lengthComputable){var n=parseInt(r.loaded/r.total*100,10);e("#show-precent").text(n+"%")}}),void o.readAsDataURL(t)):void r.show("alert","请选择正确的图片格式","danger")})}}});